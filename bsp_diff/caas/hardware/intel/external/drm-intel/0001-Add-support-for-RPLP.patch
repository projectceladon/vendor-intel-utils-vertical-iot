From a84939dccd11b1c932e461ead4c22313ab46dca4 Mon Sep 17 00:00:00 2001
From: "Suresh, Prashanth" <prashanth.suresh@intel.com>
Date: Mon, 19 Dec 2022 13:30:01 +0530
Subject: [PATCH 1/3] Add support for RPLP

Add RPLP platform support and PCIIDs

Tracked-On: OAM-105341
Signed-off-by: Suresh, Prashanth <prashanth.suresh@intel.com>
---
 intel/i915_pciids.h   | 9 +++++++++
 intel/intel_chipset.c | 2 ++
 xf86drm.h             | 2 +-
 3 files changed, 12 insertions(+), 1 deletion(-)

diff --git a/intel/i915_pciids.h b/intel/i915_pciids.h
index c00ac546..728e9f6a 100644
--- a/intel/i915_pciids.h
+++ b/intel/i915_pciids.h
@@ -666,4 +666,13 @@
       INTEL_VGA_DEVICE(0x46C2, info), \
       INTEL_VGA_DEVICE(0x46C3, info)

+/*RPL-P*/
+#define INTEL_RPLP_IDS(info) \
+       INTEL_VGA_DEVICE(0xA7A0, info), \
+       INTEL_VGA_DEVICE(0xA720, info), \
+       INTEL_VGA_DEVICE(0xA7A8, info), \
+       INTEL_VGA_DEVICE(0xA7A1, info), \
+       INTEL_VGA_DEVICE(0xA721, info), \
+       INTEL_VGA_DEVICE(0xA7A9, info)
+
 #endif /* _I915_PCIIDS_H */
diff --git a/intel/intel_chipset.c b/intel/intel_chipset.c
index f0da6d81..14a18f8f 100644
--- a/intel/intel_chipset.c
+++ b/intel/intel_chipset.c
@@ -35,6 +35,7 @@ static const struct pci_device {
       uint16_t gen;
 } pciids[] = {
       /* Keep ids sorted by gen; latest gen first */
+      INTEL_RPLP_IDS(12),
       INTEL_ADLP_IDS(12),
       INTEL_ADLS_IDS(12),
       INTEL_RKL_IDS(12),
@@ -49,6 +50,7 @@ static const struct pci_device {
       INTEL_KBL_IDS(9),
       INTEL_BXT_IDS(9),
       INTEL_SKL_IDS(9),
+
 };

 drm_private bool intel_is_genx(unsigned int devid, int gen)
diff --git a/xf86drm.h b/xf86drm.h
index 1631396a..58ab9175 100644
--- a/xf86drm.h
+++ b/xf86drm.h
@@ -74,7 +74,7 @@ extern "C" {
 /* Default /dev/dri directory permissions 0755 */
 #define DRM_DEV_DIRMODE	 	\
       (S_IRUSR|S_IWUSR|S_IXUSR|S_IRGRP|S_IXGRP|S_IROTH|S_IXOTH)
-#define DRM_DEV_MODE	 (S_IRUSR|S_IWUSR|S_IRGRP|S_IWGRP)
+#define DRM_DEV_MODE	 (S_IRUSR|S_IWUSR|S_IRGRP|S_IWGRP|S_IROTH|S_IWOTH)

 #ifdef __OpenBSD__
 #define DRM_DIR_NAME  "/dev"
--
2.39.2

