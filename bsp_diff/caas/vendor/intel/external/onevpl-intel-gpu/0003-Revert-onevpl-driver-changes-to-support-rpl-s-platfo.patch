From 7e09be7620573f9f3c0add33fe3a8d195a42d281 Mon Sep 17 00:00:00 2001
From: kalle <kalyan.alle@intel.com>
Date: Thu, 11 Aug 2022 16:26:13 +0530
Subject: [PATCH] Revert "onevpl driver changes to support rpl-s platform"

This reverts commit 102646c48a6281a0a58e4794707c9906b08e3a61.

Tracked-On: OAM-103486
Signed-off-by: Alle, Kalyan <kalyan.alle@intel.com>
Change-Id: I871ee0bc044cbff8b8c4d42f2626dfc6f8c4cdeb

---
 .../cmrt_cross_platform/include/cmrt_cross_platform.h      | 1 -
 _studio/mfx_lib/encode_hw/h264/src/mfx_h264_encode_cm.cpp  | 1 -
 _studio/mfx_lib/vpp/src/mfx_vpp_hw.cpp                     | 1 -
 _studio/shared/asc/src/asc.cpp                             | 1 -
 _studio/shared/include/mfxstructures-int.h                 | 7 -------
 _studio/shared/src/cm_mem_copy.cpp                         | 1 -
 _studio/shared/src/libmfx_core.cpp                         | 1 -
 _studio/shared/src/libmfx_core_vaapi.cpp                   | 1 -
 api/vpl/mfxcommon.h                                        | 1 -
 9 files changed, 15 deletions(-)

diff --git a/_studio/mfx_lib/cmrt_cross_platform/include/cmrt_cross_platform.h b/_studio/mfx_lib/cmrt_cross_platform/include/cmrt_cross_platform.h
index 9ee3c8c..fc5c3e2 100644
--- a/_studio/mfx_lib/cmrt_cross_platform/include/cmrt_cross_platform.h
+++ b/_studio/mfx_lib/cmrt_cross_platform/include/cmrt_cross_platform.h
@@ -715,7 +715,6 @@ typedef enum _GPU_PLATFORM {
     PLATFORM_INTEL_DG1 = 20,  //DG1
     PLATFORM_INTEL_ADL_S = 21,  //AlderLake
     PLATFORM_INTEL_ADL_P = 23, //AlderLake
-    PLATFORM_INTEL_RPL_S = 25, //RaptorLake
 } GPU_PLATFORM;
 
 //Time in seconds before kernel should timeout
diff --git a/_studio/mfx_lib/encode_hw/h264/src/mfx_h264_encode_cm.cpp b/_studio/mfx_lib/encode_hw/h264/src/mfx_h264_encode_cm.cpp
index b44ca51..551ba27 100755
--- a/_studio/mfx_lib/encode_hw/h264/src/mfx_h264_encode_cm.cpp
+++ b/_studio/mfx_lib/encode_hw/h264/src/mfx_h264_encode_cm.cpp
@@ -863,7 +863,6 @@ void CmContext::Setup(
     case MFX_HW_RKL:
     case MFX_HW_ADL_S:
     case MFX_HW_ADL_P:
-    case MFX_HW_RPL_S:
         m_program = ReadProgram(m_device, genx_simple_me_gen12lp, SizeOf(genx_simple_me_gen12lp));
         m_programHist = ReadProgram(m_device, genx_histogram_gen12lp, SizeOf(genx_histogram_gen12lp));
         break;
diff --git a/_studio/mfx_lib/vpp/src/mfx_vpp_hw.cpp b/_studio/mfx_lib/vpp/src/mfx_vpp_hw.cpp
index 5c09cae..4236b52 100755
--- a/_studio/mfx_lib/vpp/src/mfx_vpp_hw.cpp
+++ b/_studio/mfx_lib/vpp/src/mfx_vpp_hw.cpp
@@ -2438,7 +2438,6 @@ mfxStatus  VideoVPPHW::Init(
             case MFX_HW_RKL:
             case MFX_HW_ADL_S:
             case MFX_HW_ADL_P:
-	    case MFX_HW_RPL_S:
                 res = m_pCmDevice->LoadProgram((void*)genx_fcopy_gen12lp,sizeof(genx_fcopy_gen12lp),m_pCmProgram,"nojitter");
                 break;
 #endif
diff --git a/_studio/shared/asc/src/asc.cpp b/_studio/shared/asc/src/asc.cpp
index 25a0835..2a39ba2 100644
--- a/_studio/shared/asc/src/asc.cpp
+++ b/_studio/shared/asc/src/asc.cpp
@@ -302,7 +302,6 @@ mfxStatus ASC::InitGPUsurf(CmDevice* pCmDevice) {
     case PLATFORM_INTEL_ICLLP:
         return MFX_ERR_UNSUPPORTED;
     case PLATFORM_INTEL_ADL_S:
-    case PLATFORM_INTEL_RPL_S:
     case PLATFORM_INTEL_TGLLP:
     case PLATFORM_INTEL_RKL:
     case PLATFORM_INTEL_DG1:
diff --git a/_studio/shared/include/mfxstructures-int.h b/_studio/shared/include/mfxstructures-int.h
index 0a71096..07ff71b 100755
--- a/_studio/shared/include/mfxstructures-int.h
+++ b/_studio/shared/include/mfxstructures-int.h
@@ -79,7 +79,6 @@ enum eMFXHWType
     MFX_HW_DG1       = MFX_HW_TGL_LP + 3,
     MFX_HW_ADL_S     = MFX_HW_TGL_LP + 4,
     MFX_HW_ADL_P     = MFX_HW_TGL_LP + 5,
-    MFX_HW_RPL_S     = MFX_HW_TGL_LP + 6,
 
 };
 
@@ -456,12 +455,6 @@ typedef struct {
     { 0x46C2, MFX_HW_ADL_P, MFX_GT2 },//ADL-P
     { 0x46C3, MFX_HW_ADL_P, MFX_GT2 },//ADL-P
 
-    /* RPL-S */
-    { 0x4600, MFX_HW_RPL_S, MFX_GT1 },//RPL-S
-    { 0xA780, MFX_HW_RPL_S, MFX_GT1 },//RPL-S
-    { 0xA781, MFX_HW_RPL_S, MFX_GT1 },//RPL-S
-    { 0xA782, MFX_HW_RPL_S, MFX_GT1 },//RPL-S
-    { 0xA783, MFX_HW_RPL_S, MFX_GT1 },//RPL-S
 
 };
 
diff --git a/_studio/shared/src/cm_mem_copy.cpp b/_studio/shared/src/cm_mem_copy.cpp
index 56a4998..0ae072a 100755
--- a/_studio/shared/src/cm_mem_copy.cpp
+++ b/_studio/shared/src/cm_mem_copy.cpp
@@ -2523,7 +2523,6 @@ mfxStatus CmCopyWrapper::InitializeSwapKernels(eMFXHWType hwtype)
     case MFX_HW_RKL:
     case MFX_HW_ADL_S:
     case MFX_HW_ADL_P:
-    case MFX_HW_RPL_S:
         cmSts = m_pCmDevice->LoadProgram((void*)genx_copy_kernel_gen12lp,sizeof(genx_copy_kernel_gen12lp),m_pCmProgram,"nojitter");
         break;
 #endif
diff --git a/_studio/shared/src/libmfx_core.cpp b/_studio/shared/src/libmfx_core.cpp
index 45227a7..47fab2f 100755
--- a/_studio/shared/src/libmfx_core.cpp
+++ b/_studio/shared/src/libmfx_core.cpp
@@ -591,7 +591,6 @@ static inline mfxPlatform MakePlatform(eMFXHWType type, mfxU16 device_id)
                          platform.CodeName = MFX_PLATFORM_TIGERLAKE;     break;
     case MFX_HW_ADL_S  : platform.CodeName = MFX_PLATFORM_ALDERLAKE_S;   break;
     case MFX_HW_ADL_P  : platform.CodeName = MFX_PLATFORM_ALDERLAKE_P;   break;
-    case MFX_HW_RPL_S  : platform.CodeName = MFX_PLATFORM_RAPTORLAKE_S;   break;
     default:
                          platform.MediaAdapterType = MFX_MEDIA_UNKNOWN;
                          platform.CodeName = MFX_PLATFORM_UNKNOWN;       break;
diff --git a/_studio/shared/src/libmfx_core_vaapi.cpp b/_studio/shared/src/libmfx_core_vaapi.cpp
index 316f05b..28e8b84 100755
--- a/_studio/shared/src/libmfx_core_vaapi.cpp
+++ b/_studio/shared/src/libmfx_core_vaapi.cpp
@@ -253,7 +253,6 @@ mfxStatus VAAPIVideoCORE_T<Base>::SetHandle(
                 case MFX_HW_RKL:
                 case MFX_HW_ADL_S:
                 case MFX_HW_ADL_P:
-		case MFX_HW_RPL_S:
                 case MFX_HW_DG1:
                     // These platforms support VPL feature set
                     this->m_enabled20Interface = true;
diff --git a/api/vpl/mfxcommon.h b/api/vpl/mfxcommon.h
index abda962..3845a53 100644
--- a/api/vpl/mfxcommon.h
+++ b/api/vpl/mfxcommon.h
@@ -197,7 +197,6 @@ enum {
     MFX_PLATFORM_ALDERLAKE_P    = 44, /*!< Code name Alder Lake P. */
     MFX_PLATFORM_ARCTICSOUND_P  = 45,
     MFX_PLATFORM_XEHP           = 45, /*!< Code name Xe HP. */
-    MFX_PLATFORM_RAPTORLAKE_S   = 46, /*!< Code name Raptor Lake. */
     MFX_PLATFORM_KEEMBAY        = 50, /*!< Code name Keem Bay. */
 };
 
-- 
2.17.1

