From 048c21dd8f8e365b954d6fbe8a17868e0250a730 Mon Sep 17 00:00:00 2001
From: chenyanxzhu <chenyanx.zhu@intel.com>
Date: Wed, 26 Oct 2022 10:56:14 +0800
Subject: [PATCH] Add sepolicy folder for system private domain

Fix avc denied error for mediatranscoding, when running cts
case CtsMediaProviderTranscodeTests. 'mediatranscoding' is a
system defined private domain.

As media.transcoding service need access to gpu device and find
surfaceflinger, added sepolicies to fix the CTS issue.

Tracked-On: OAM-104121
Signed-off-by: chenyanxzhu <chenyanx.zhu@intel.com>
---
 groups/media/auto/BoardConfig.mk | 2 ++
 1 file changed, 2 insertions(+)

diff --git a/groups/media/auto/BoardConfig.mk b/groups/media/auto/BoardConfig.mk
index b2f269a..f348cef 100644
--- a/groups/media/auto/BoardConfig.mk
+++ b/groups/media/auto/BoardConfig.mk
@@ -1,3 +1,5 @@
+SYSTEM_EXT_PRIVATE_SEPOLICY_DIRS += $(INTEL_PATH_SEPOLICY)/system_ext/private
+
 {{#enable_msdk_omx}}
 INTEL_STAGEFRIGHT := true
 
-- 
2.38.1

