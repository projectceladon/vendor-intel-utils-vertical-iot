From a7f6450b78346db677ed3a33f4ce1237cfd63448 Mon Sep 17 00:00:00 2001
From: "Suresh, Prashanth" <prashanth.suresh@intel.com>
Date: Mon, 26 Sep 2022 15:20:26 +0530
Subject: [PATCH] Pass host graphics SRIOV info to guest.

Add file in aaf folder to enable guest to know if host supports SRIOV.
Set media coded to hardware based on this value.

Tracked-On: OAM-104076
Signed-off-by: Suresh, Prashanth <prashanth.suresh@intel.com>
---
 groups/media/auto/auto_hal.in | 12 ++++++++++--
 1 file changed, 10 insertions(+), 2 deletions(-)

diff --git a/groups/media/auto/auto_hal.in b/groups/media/auto/auto_hal.in
index 21eed01..4e68aec 100644
--- a/groups/media/auto/auto_hal.in
+++ b/groups/media/auto/auto_hal.in
@@ -13,8 +13,16 @@ case "$(cat /proc/fb)" in
                 setprop vendor.intel.video.codec hardware
                 ;;
         *)
-                echo "Intel SRIOV"
-                setprop vendor.intel.video.codec hardware
+                case "$(cat /mnt/share/mixins.spec)" in
+                        *gpu-type:sriov*)
+	                        echo "Intel SRIOV"
+                                setprop vendor.intel.video.codec hardware
+                                ;;
+                        *)
+                                echo "Software codec"
+                                setprop vendor.intel.video.codec software
+                                ;;
+                esac
                 ;;
 esac
 }
-- 
2.37.3

